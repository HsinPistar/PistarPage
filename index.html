<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <link rel="icon" href="images/favicon.ico" type="image/x-icon">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="X-UA-Compatible" content="edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">   
    <link rel="stylesheet" href="css/style.css">
    <title>Happy Lunar Year</title>
</head>
<body class="">
    <div class="webpage">
    <div class="bgUsual bgBox"></div>
    
    <div class="snowflakeList" style="display: none">
        <script>
            const redGet = document.querySelector('.snowflakeList');
            let str = "";        
            for( let i=0; i<20; i++ ){
                let ranNum = (Math.floor(Math.random()*20)+1);
               
                if (ranNum <= 7 ){
                    ranNum = (Math.floor(Math.random()*20)+1);
                }else {
                    str+=` <a class="snowflakeLista" href="javascript:void(0)" title="Click to open the red envelope" style="left: ${i*5}%; animation: udmoving ${ranNum}.${i}s linear infinite,lrmoving ${ranNum}.${i}s infinite linear alternate both;transform: translateY(-20vh);"><img src="images/xhb.gif"></a> ` ;

                }
                
           } 
           redGet.innerHTML = str;   
        </script>
    </div>
    
    
    <div class="loadingBlack" style="display: none">
        <div class="loading"></div>
    </div>
    
    <div class="win" style="display: none">
        <div class="winimg">
            <div class="wordimg"></div>
            <div class="godimg"></div>
        </div>
        <div class="winTx">
            Congratulations you getting<br>
            <span id="amount">??</span>dollaws!
        </div>
    </div>
    
    <div class="notwin" style="display: none">
        <div class="nowinimg">
            <div class="wordimg"></div>
            <div class="tigerimg"></div>
        </div>
        <div class="winTx">It's a pity! Try Again ~</div>
    </div>
    <div class="black"></div>
    
    <div class="wrapper">
        <div class="headerTop">
            

            <link href="https://static.yoeinfo.com/Content01/css/currency.css?210115" rel="stylesheet" />
            <link href="https://static.yoeinfo.com/Content01/Theme/wh824/zh-cn/css/currency_skin.css?210122" rel="stylesheet" />
                   
            <div class="newsBox">
                <div class="news">
                    
                    <div class="newsTit"><img src="images/icon01.png"></div>
                    <marquee class="lunbo" direction="left" scrollamount="4" onmouseover="this.stop()" onmouseout="this.start()">
                        Congratulations to zww***3 for getting $20.40, 
                        Congratulations to tyl***9 for getting $16.1,
                        Congratulations to hry***8 for getting $4.50,
                        Congratulations to aus***n for getting $18.1,
                        Congratulations to hui***1 for getting $1.00,
                        Congratulations to ron***1 for getting $662.1,
                        Congratulations to jj7***9 for getting $3.60,
                        Congratulations to 518***e for getting $646.8,
                    </marquee>
                </div>
            </div>
        </div>
            <div class="titleBg"></div>
            
            <div class="TextBox">
                <div class="Text">
                    <img src="images/icon_2.png" />
                    <div class="userName">
                        <div class="h1"></div>
                        <div class="elenew-gamejp-prize clearfix">
                            <span id="totalPeople" class="number"></span>
                        </div>
                        <div class="h1">people played</div>
                    </div>
                </div>
                <div class="Text">
                    <img src="images/icon_3.png" />
                    <div class="userGold">
                        <div class="h1"></div>
                        <div class="elenew-gamejp-prize clearfix">
                            <input id="totalMoney" type="hidden" value="timestampX">
                            <span id="formatTotalMoney" class="number"></span>
                        </div>
                        <div class="h1">dollars has been sent</div>
                    </div>
                </div>
            </div>

        
        
        <input type="hidden" id="isActive" value="false">
        <div class="Countdown">
            <div class="hb_for wordbox">               
                <div id="message" class="txt"></div>
                <div class="HotDate">
                    <div class="tle">Let's start the game!</div>
                    <span>
                        <em id="playTimes" style="display: none">次</em>
                    </span>
                </div>
                
                <button href="javascript:void(0)" id="play_button" class="playbtn2" data-login="False">
                    <div class="object">
                        <img src="images/hand.png" width="85" height="auto">
                    </div>
                    <img src="images/b-btn.png?210203" />
                </button>
            </div>
        </div>
        
        <div class="box eventWay2">
            <a href="#" class="boxBtnHover"><img src="images/box-btn.png?210203" alt="" /></a>
        </div>        
        
        <div class="model"></div>
    </div>
    <div class="howToPlayBox" style="display:none;">
        <div class="howToPlay">
            <h3>How to Play</h3>
            <ul>
                <li><img src="images/icon_2.png">
                    <span>Clicking “ <strong>START</strong> ” button, enter the account & password, 
                    and then click “ <strong>START</strong> ” button again to start game.</span></li>
                <li><img src="images/icon_2.png">
                    <span>After logging in, each player can <strong>play 3 times,</strong> and randomly
                    click to drop the red envelope to get the bonus.</span></li>
                <li><img src="images/icon_2.png">
                    <span>After the play times is zero, please re-enter <span>New</span> account & 
                    password to play again.</span></li>
            </ul>
            <button class="closeBtn">OK</button>
        </div>
        <div class="projectbox">
            <ul>               
                <li class="project tiger2"></li>
            </ul>
        </div>           
    </div>
    <div class="projectbox">
        <ul>
            <li class="project god"></li>
            <li class="project cloud"></li>
            <li class="project Lantern"></li>
            <li class="project cloudL"></li>
            <li class="project cloudR"></li>
            <li class="project tiger2"></li>
            <li class="project goldR"></li>
            <li class="project goldD"></li>
            <li class="project waveL"></li>
            <li class="project waveR"></li>
        </ul>
    </div> 
   
    <div id="quicksign" title="Login to Play" class="howToPlayBox" style="display:none;">
        <div class="fastLoginBg howToPlay">
            <h3>Login to Play</h3>
            <ul class="fastLoginBox">                
                    <li>Account : <input type="text" class="userNameLogin"></li>
                    <li>Password : <input type="text" class="userPasswordLogin"></li>                    
            </ul>
            <h4><img src="images/icon_2.png"><span class="messageText">Please enter your account & password.</span></h4>

            <input type="button" value="send" class="btnSendLogin">
        </div>
        <div class="projectbox">
            <ul>               
                <li class="project model"></li>
            </ul>
        </div>   
    </div> 

</div></body>
</html>

<script>   
    const startGame = document.querySelector('.boxBtnHover');
    const playBtn = document.querySelectorAll('.snowflakeLista');
    const loadback = document.querySelector('.loadingBlack');
    const winback = document.querySelector('.win');
    const nowinback = document.querySelector('.notwin');
    const gold = document.querySelector('#amount');
    const playTimes = document.querySelector('#playTimes');
    const playMessage = document.querySelector(".tle");
    const totalPeople = document.querySelector("#totalPeople");
    const formatTotalMoney = document.querySelector("#formatTotalMoney");
    const howToPlayBox = document.querySelector(".howToPlayBox");
    const closeBtn = document.querySelector(".closeBtn");
    

    let playTime = 3;
    playTimes.textContent = playTime+'times';

    let peoplenumberNum = (Math.floor(Math.random()*10)+1)*100 + (Math.floor(Math.random()*10)+1);
    let formatTotalMoneyNum = (Math.floor(Math.random()*1000)+1)*100;
    let userGoldNum = 0;
    let luckynumberNum = 0;    
    

    totalPeople.textContent = peoplenumberNum;
    formatTotalMoney.textContent = formatTotalMoneyNum;

    startGame.addEventListener('click',function(){
        howToPlayBox.style.display = "block";
        
    })

    closeBtn.addEventListener('click',function(){
        howToPlayBox.style.display = "none";
        
    })

    //紅包點擊
    playBtn.forEach(e => {
        e.addEventListener('click',function(e){

            console.log("press");
            
     
            luckynumber = Math.floor(Math.random()*10)+1;
            console.log(luckynumber);           


            if (luckynumber % 2 == 0) {
             console.log("luckyNum");
             redGet.style.display = "none";
             loadback.style.display = "block";
             setTimeout(function(){    
                loadback.style.display = "none"; 
                winback.style.display = "block";                 
                gold.textContent =  luckynumber *100;
                
                

            },5000);  
            winback.addEventListener("click",function(){
                winback.style.display = "none";
            }); 
            luckynumberNum = luckynumber *100;       

             }else {
                console.log("Nolucky");
                redGet.style.display = "none";
                loadback.style.display = "block";
                setTimeout(function(){    
                   loadback.style.display = "none"; 
                   nowinback.style.display = "block";
                             
               },5000); 
               nowinback.addEventListener("click",function(){
                nowinback.style.display = "none";                
                });
                luckynumberNum = 0;          
             }
            
                
            playTime = playTime-1;
            playTimes.textContent = playTime+'times'; 
            
            userGoldNum = userGoldNum + luckynumberNum ;
            //userGold.textContent = "You got" + userGoldNum + "dallows" ;
            userGold.innerHTML = `You got <strong>${userGoldNum}</strong> dallows` ;
           
         })
    })

    //登入功能

    const quickSign = document.querySelector("#quicksign");

    const userNameLogin = document.querySelector('.userNameLogin');
    const userPasswordLogin = document.querySelector(".userPasswordLogin");
    const btnSendLogin = document.querySelector(".btnSendLogin");
    
    const messageText = document.querySelector(".messageText");
    const userName = document.querySelector(".userName");
    const userGold = document.querySelector(".userGold");

    const playbutton = document.querySelector("#play_button");
    let userLogin = false;
    
    playbutton.addEventListener('click',function(e){
        console.log("startpress");
        


        if(userLogin == false){
            quickSign.style.display = "block"; 
            quickSign.style.position = "absolute";           
            userLogin = true;
            playMessage.textContent="You can play :";            
            playTimes.style.display="block";
            
        }else if(userLogin == true) {
            
            if (playTime == 0) {
                alert("Your play times is ZERO !");
            }else {
                redGet.style.display = "block";
                console.log("startGame");
            }
        }


    })

    
    btnSendLogin.addEventListener('click',function(e){
        console.log("press");
        callLogin();
        //userName.textContent= "Hi~ Welcome player "+ userNameLogin.value;
        userName.innerHTML= `Hi~ Welcome player <strong>${userNameLogin.value}</strong>`;
        //userGold.textContent = "You got" + " " + userGoldNum + " dallows" ; 
        userGold.innerHTML = `You got  <strong>${userGoldNum}</strong> dallows `;        
    })

    function callLogin(){

        if(userNameLogin.value =="" || userPasswordLogin.value =="" ){
            messageText.textContent = "Login account & password input error.";
            return;
          }else {
            
            messageText.textContent = "Login successfully! Let'a start the game!";
            setTimeout(function(){    
                quickSign.style.display = "none"; 
                        
            },3000); 
          }
    }
    
    function renderRedEnvelope(){
        let str = "";        
        for( let i=0; i<20; i++ ){
            let ranNum = (Math.floor(Math.random()*20)+1);
            str+=` <a class="snowflakeLista" href="javascript:void(0)" title="Click to open the red envelope" style="left: ${i*5}%; animation: udmoving ${ranNum}.${i}s linear infinite,lrmoving ${ranNum}.${i}s infinite linear alternate both;transform: translateY(-20vh);"><img src="images/xhb.gif"></a> ` ;
       } 
       redGet.innerHTML = str;
    }

      

</script>